<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register for D.Tech Puzzle Night</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img class="logo-img" src="dtech-logo.png" alt="D.Tech Math Club Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
            <div class="logo" style="display: none;"></div>
            <div class="logo-text">D.Tech Math Club</div>
        </div>
        <nav>
            <a href="index.html">Home</a>
            <a href="puzzle-night.html" class="active">Puzzle Night</a>
            <a href="dpotd.html">d.PotD</a>
            <a href="dtmt.html">DTMT</a>
            <a href="team.html">Our Team</a>
        </nav>
    </header>

    <section class="form-section">
        <div class="form-container">
            <div class="form-main">
                <form id="registrationForm">
                    <!-- Step 1: Add your details -->
                    <div class="form-step">
                        <h2 class="step-title">1. Add your details</h2>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="studentFirstName">*Student first name</label>
                                <input type="text" id="studentFirstName" name="studentFirstName" placeholder="Sitar" required>
                            </div>
                            <div class="form-group">
                                <label for="studentLastName">*Student last name</label>
                                <input type="text" id="studentLastName" name="studentLastName" placeholder="Eswar" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="parentEmail">*Parent Email</label>
                                <input type="email" id="parentEmail" name="parentEmail" placeholder="sitareswar@gmail.com" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="parentPhone">Parent Phone Number</label>
                                <input type="tel" id="parentPhone" name="parentPhone">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="school">*School</label>
                                <input type="text" id="school" name="school" required>
                            </div>
                        </div>

                        <div class="form-group full-width">
                            <label>*What grade is your student in?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="grade6" name="grade" value="6" required>
                                    <label for="grade6">6th</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="grade7" name="grade" value="7">
                                    <label for="grade7">7th</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="grade8" name="grade" value="8">
                                    <label for="grade8">8th</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="dietaryRestrictions">Does your student have any dietary restrictions?</label>
                                <textarea id="dietaryRestrictions" name="dietaryRestrictions"></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="comments">Questions or Comments?</label>
                                <textarea id="comments" name="comments"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Event Policies -->
                    <div class="form-step">
                        <h2 class="step-title">2. Event Policies</h2>

                        <p style="font-size: 16px; margin-bottom: 20px; color: #333;">
                            Please indicate that you've read and agree to the event's policies.
                        </p>

                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" id="agreePolicies" name="agreePolicies" required>
                                <label for="agreePolicies">
                                    I agree to: <a onclick="openModal('eligibleModal')">Eligible Competitors</a>, <a onclick="openModal('cancellationModal')">Cancellation Policy</a>, <a onclick="openModal('mediaModal')">Media Consent</a>
                                </label>
                            </div>
                        </div>

                        <button type="submit" class="next-btn">Submit</button>
                    </div>
                </form>
            </div>

            <div class="form-sidebar">
                <h3>D.Tech Puzzle Night</h3>
                <p><strong>Dec 05, 2025, 4:30 PM â€“ 6:30 PM</strong></p>
                <p>Design Tech High School</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-logo">
            <img src="hero-logo.png" alt="D.Tech Math Club Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
            <div class="logo" style="display: none;"></div>
        </div>
        <div class="footer-contact">
            <p>dtechmathclub@gmail.com</p>
            <p>designtechhighschool.org</p>
        </div>
        <div class="footer-address">
            <p>275 Oracle Pkwy,</p>
            <p>Redwood City, CA</p>
            <p>94065, USA</p>
        </div>
        <div class="footer-links">
            <a href="puzzle-night.html">Competitions</a>
            <a href="index.html#about">About</a>
            <a href="index.html#contact">Contact Us</a>
        </div>
    </footer>

    <!-- Modals -->
    <div id="eligibleModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('eligibleModal')">&times;</button>
            <h2>Eligible Competitors</h2>
            <p>The D.Tech Puzzle Night is only available to middle school students in the Bay Area. All students participating must be affiliated with a Bay Area middle school.</p>
        </div>
    </div>

    <div id="cancellationModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('cancellationModal')">&times;</button>
            <h2>Cancellation Policy</h2>
            <p>The D.Tech Math Club deserves the right to cancel this event due to any unforseen circumstances. D.Tech Math Club must be notified of any cancellations through email at dtechmathclub@gmail.com.</p>
        </div>
    </div>

    <div id="mediaModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('mediaModal')">&times;</button>
            <h2>Media Consent</h2>
            <p>By attending this event, participants and guardians consent to the capture and use of photographs and video recordings for promotional and educational purposes by the organizers. If you do not wish to be photographed or recorded, please notify organizers upon arrival. No compensation will be provided for the use of such media.</p>
        </div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzte7E8oFREonkzY9zPMYHFO_a_idFkuKAt6Qd16OB34xFnu8nPofhKVjkpq6I9-aja/exec';

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('show');
            }
        });

        document.getElementById('registrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                formType: 'puzzle-night',
                timestamp: new Date().toISOString(),
                studentFirstName: document.getElementById('studentFirstName').value,
                studentLastName: document.getElementById('studentLastName').value,
                parentEmail: document.getElementById('parentEmail').value,
                parentPhone: document.getElementById('parentPhone').value,
                school: document.getElementById('school').value,
                grade: document.querySelector('input[name="grade"]:checked').value,
                dietaryRestrictions: document.getElementById('dietaryRestrictions').value,
                comments: document.getElementById('comments').value,
                agreePolicies: document.getElementById('agreePolicies').checked
            };

            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                alert('Thank you for registering! You will receive a confirmation email soon.');
                this.reset();
            } catch (error) {
                console.error('Error:', error);
                alert('There was an error submitting the registration. Please try again or email us directly at dtechmathclub@gmail.com');
            }
        });
    </script>
</body>
</html>
