<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register for D.Tech Puzzle Night</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img class="logo-img" src="dtech-logo.png" alt="D.Tech Math Club Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
            <div class="logo" style="display: none;"></div>
            <div class="logo-text">D.Tech Math Club</div>
        </div>
        <nav>
            <a href="index.html">Home</a>
            <a href="puzzle-night.html" class="active">Puzzle Night</a>
            <a href="dpotd.html">d.PotD</a>
            <a href="dtmt.html">DTMT</a>
            <a href="team.html">Our Team</a>
            <button class="dark-mode-toggle" id="darkModeToggle">🌙</button>
        </nav>
    </header>

    <section class="form-section">
        <h1 class="section-title">Register for D.Tech Puzzle Night</h1>
        
        <div class="form-container">
            <div class="form-main">
                <form id="registrationForm">
                    <!-- Step 1: Student Information -->
                    <div class="form-step">
                        <h2 class="step-title">Student Information</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name *</label>
                                <input type="text" id="firstName" name="firstName" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name *</label>
                                <input type="text" id="lastName" name="lastName" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="email">Email *</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="school">School *</label>
                                <input type="text" id="school" name="school" required>
                            </div>
                            <div class="form-group">
                                <label for="grade">Grade *</label>
                                <input type="text" id="grade" name="grade" required>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Parent/Guardian Information -->
                    <div class="form-step">
                        <h2 class="step-title">Parent/Guardian Information</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="parentFirstName">First Name *</label>
                                <input type="text" id="parentFirstName" name="parentFirstName" required>
                            </div>
                            <div class="form-group">
                                <label for="parentLastName">Last Name *</label>
                                <input type="text" id="parentLastName" name="parentLastName" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="parentEmail">Email *</label>
                                <input type="email" id="parentEmail" name="parentEmail" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="parentPhone">Phone Number *</label>
                                <input type="tel" id="parentPhone" name="parentPhone" required>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: T-Shirt Size -->
                    <div class="form-step">
                        <h2 class="step-title">T-Shirt Size</h2>
                        <p style="margin-bottom: 20px;">Select your t-shirt size (optional)</p>
                        
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="sizeXS" name="tshirtSize" value="XS">
                                <label for="sizeXS">Youth XS</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeS" name="tshirtSize" value="S">
                                <label for="sizeS">Youth S</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeM" name="tshirtSize" value="M">
                                <label for="sizeM">Youth M</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeL" name="tshirtSize" value="L">
                                <label for="sizeL">Youth L</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeXL" name="tshirtSize" value="XL">
                                <label for="sizeXL">Youth XL</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeAdultS" name="tshirtSize" value="Adult S">
                                <label for="sizeAdultS">Adult S</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeAdultM" name="tshirtSize" value="Adult M">
                                <label for="sizeAdultM">Adult M</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sizeAdultL" name="tshirtSize" value="Adult L">
                                <label for="sizeAdultL">Adult L</label>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Additional Information -->
                    <div class="form-step">
                        <h2 class="step-title">Additional Information</h2>
                        
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="allergies">Dietary Restrictions/Allergies</label>
                                <textarea id="allergies" name="allergies" placeholder="Please list any dietary restrictions or allergies..."></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="comments">Additional Comments</label>
                                <textarea id="comments" name="comments" placeholder="Any questions or special requests..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Step 5: Agreements -->
                    <div class="form-step">
                        <h2 class="step-title">Agreements</h2>
                        
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" id="eligibleCheck" name="eligibleCheck" required>
                                <label for="eligibleCheck">
                                    I confirm that the student is a middle school student in the Bay Area. 
                                    <a onclick="openModal('eligibleModal')">Learn more</a>
                                </label>
                            </div>

                            <div class="checkbox-option">
                                <input type="checkbox" id="cancellationCheck" name="cancellationCheck" required>
                                <label for="cancellationCheck">
                                    I understand the cancellation policy. 
                                    <a onclick="openModal('cancellationModal')">Learn more</a>
                                </label>
                            </div>

                            <div class="checkbox-option">
                                <input type="checkbox" id="mediaCheck" name="mediaCheck" required>
                                <label for="mediaCheck">
                                    I consent to media capture and usage. 
                                    <a onclick="openModal('mediaModal')">Learn more</a>
                                </label>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="next-btn">Submit Registration</button>
                </form>
            </div>

            <div class="form-sidebar">
                <h3>D.Tech Puzzle Night</h3>
                <p><strong>Date:</strong> Friday, December 5, 2025</p>
                <p><strong>Time:</strong> 4:30 PM - 6:30 PM</p>
                <p><strong>Location:</strong> Design Tech High School</p>
                <p><strong>Address:</strong> 275 Oracle Pkwy, Redwood City, CA 94065</p>
                <p style="margin-top: 20px;"><strong>What to Expect:</strong></p>
                <p>• Interactive puzzle stations</p>
                <p>• AMC-style challenge problems</p>
                <p>• Math modeling activities</p>
                <p>• Countdown round competition</p>
                <p>• Prizes and raffle</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-logo">
            <img src="hero-logo.png" alt="D.Tech Math Club Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
            <div class="logo" style="display: none;"></div>
        </div>
        <div class="footer-contact">
            <p>dtechmathclub@gmail.com</p>
            <p>designtechhighschool.org</p>
        </div>
        <div class="footer-address">
            <p>275 Oracle Pkwy,</p>
            <p>Redwood City, CA</p>
            <p>94065, USA</p>
        </div>
        <div class="footer-links">
            <a href="puzzle-night.html">Competitions</a>
            <a href="index.html#about">About</a>
            <a href="index.html#contact">Contact Us</a>
        </div>
    </footer>

    <!-- Modals -->
    <div id="eligibleModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('eligibleModal')">&times;</button>
            <h2>Eligible Competitors</h2>
            <p>The D.Tech Puzzle Night is only available to middle school students in the Bay Area. All students participating must be affiliated with a Bay Area middle school.</p>
        </div>
    </div>

    <div id="cancellationModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('cancellationModal')">&times;</button>
            <h2>Cancellation Policy</h2>
            <p>The D.Tech Math Club reserves the right to cancel this event due to any unforeseen circumstances. D.Tech Math Club must be notified of any cancellations through email at dtechmathclub@gmail.com.</p>
        </div>
    </div>

    <div id="mediaModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('mediaModal')">&times;</button>
            <h2>Media Consent</h2>
            <p>By attending this event, participants and guardians consent to the capture and use of photographs and video recordings for promotional and educational purposes by the organizers. If you do not wish to be photographed or recorded, please notify organizers upon arrival. No compensation will be provided for the use of such media.</p>
        </div>
    </div>

    <script>
        // Dark mode toggle
        const darkModeToggle = document.getElementById('darkModeToggle');
        const body = document.body;

        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            body.classList.add('dark-mode');
            darkModeToggle.textContent = '☀️';
        }

        darkModeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                darkModeToggle.textContent = '☀️';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                darkModeToggle.textContent = '🌙';
                localStorage.setItem('darkMode', null);
            }
        });

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('show');
            }
        });

        // Form submission
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzte7E8oFREonkzY9zPMYHFO_a_idFkuKAt6Qd16OB34xFnu8nPofhKVjkpq6I9-aja/exec';
        
        document.getElementById('registrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('.next-btn');
            const originalText = submitBtn.textContent;
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            const formData = {
                formType: 'puzzleNightRegistration',
                timestamp: new Date().toISOString(),
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                school: document.getElementById('school').value,
                grade: document.getElementById('grade').value,
                parentFirstName: document.getElementById('parentFirstName').value,
                parentLastName: document.getElementById('parentLastName').value,
                parentEmail: document.getElementById('parentEmail').value,
                parentPhone: document.getElementById('parentPhone').value,
                tshirtSize: document.querySelector('input[name="tshirtSize"]:checked')?.value || 'Not specified',
                allergies: document.getElementById('allergies').value,
                comments: document.getElementById('comments').value
            };
            
            try {
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                alert('Registration submitted successfully! You will receive a confirmation email shortly.');
                this.reset();
                
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            } catch (error) {
                console.error('Error:', error);
                alert('There was an error submitting your registration. Please try again or email us at dtechmathclub@gmail.com');
                
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });
    </script>
</body>
</html>
